{% if history and history|length > 0 %}
<div class="price-chart-container">
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th style="text-align: right;">Price</th>
                <th style="text-align: right;">Change</th>
            </tr>
        </thead>
        <tbody>
            {% for i, entry in enumerate(history) %}
            <tr>
                <td>{{ entry.recorded_at.strftime('%Y-%m-%d %H:%M') }}</td>
                <td style="text-align: right;">{{ "{:,.0f}".format(entry.price) }}</td>
                <td style="text-align: right;">
                    {% if i > 0 %}
                        {% set prev_price = history[i-1].price %}
                        {% set change = entry.price - prev_price %}
                        {% if change > 0 %}
                        <span class="price-up">+{{ "{:,.0f}".format(change) }}</span>
                        {% elif change < 0 %}
                        <span class="price-down">{{ "{:,.0f}".format(change) }}</span>
                        {% else %}
                        --
                        {% endif %}
                    {% else %}
                    --
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="empty-state">
    <p>No price history available.</p>
</div>
{% endif %}
